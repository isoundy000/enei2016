//tentone | https://github.com/tentone
function Vector2(a,b){this.x=void 0!==a?a:0;this.y=void 0!==b?b:0}Vector2.prototype.set=function(a,b){this.x=a;this.y=b};function Key(){this.justReleased=this.justPressed=this.isPressed=!1}Key.KEY_DOWN=-1;Key.KEY_UP=1;Key.KEY_RESET=0;
Key.prototype.update=function(a){this.justReleased=this.justPressed=!1;a===Key.KEY_DOWN?(!1===this.isPressed&&(this.justPressed=!0),this.isPressed=!0):a===Key.KEY_UP?(this.isPressed&&(this.justReleased=!0),this.isPressed=!1):a===Key.KEY_RESET&&(this.justPressed=this.justReleased=!1)};Key.prototype.set=function(a,b,c){this.justPressed=a;this.isPressed=b;this.justReleased=c};Key.prototype.reset=function(){this.justReleased=this.isPressed=this.justPressed=!1};
function Mouse(){this._keys=[];this._position=new Vector2(0,0);this._position_updated=!1;this._delta=new Vector2(0,0);this._wheel=0;this._wheel_updated=!1;this.keys=[];this.position=new Vector2(0,0);this.delta=new Vector2(0,0);this.wheel=0;this.canvas=null;for(var a=0;3>a;a++)this._keys.push(new Key),this.keys.push(new Key);var b=this;void 0!==document.onmousewheel?document.addEventListener("mousewheel",function(a){b._wheel=a.deltaY;b._wheel_updated=!0},!1):void 0!==document.addEventListener?document.addEventListener("DOMMouseScroll",
function(a){b._wheel=30*a.detail;b._wheel_updated=!0},!1):document.onwheel=function(a){b._wheel=a.deltaY;b._wheel_updated=!0};if("ontouchstart"in window||0<navigator.msMaxTouchPoints){var c=new Vector2(0,0);document.addEventListener("touchstart",function(a){a=a.touches[0];c.set(a.clientX,a.clientY);b.updateKey(Mouse.LEFT,Key.KEY_DOWN)},!1);document.addEventListener("touchend",function(a){b.updateKey(Mouse.LEFT,Key.KEY_UP)},!1);document.addEventListener("touchmove",function(a){a=a.touches[0];if(null!==
b.canvas){var d=b.canvas.getBoundingClientRect();b.updatePosition(a.clientX-d.left,a.clientY-d.top,a.clientX-c.x,a.clientY-c.y)}else b.updatePosition(a.clientX,a.clientY,a.clientX-c.x,a.clientY-c.y);c.set(a.clientX,a.clientY)},!1)}else document.addEventListener("mousemove",function(a){if(null!==b.canvas){var c=b.canvas.getBoundingClientRect();b.updatePosition(a.clientX-c.left,a.clientY-c.top,a.movementX,a.movementY)}else b.updatePosition(a.clientX,a.clientY,a.movementX,a.movementY)},!1),document.addEventListener("mousedown",
function(a){b.updateKey(a.which-1,Key.KEY_DOWN)},!1),document.addEventListener("mouseup",function(a){b.updateKey(a.which-1,Key.KEY_UP)},!1)}Mouse.LEFT=0;Mouse.MIDDLE=1;Mouse.RIGHT=2;Mouse.prototype.setCanvas=function(a){this.canvas=a;a.mouseInside=!1;a.addEventListener("mouseenter",function(){this.mouseInside=!0},!1);a.addEventListener("mouseleave",function(){this.mouseInside=!1},!1)};Mouse.prototype.insideCanvas=function(){return null===this.canvas?!1:this.canvas.mouseInside};
Mouse.prototype.setLock=function(a){null!==this.canvas&&(a?this.canvas.requestPointerLock?this.canvas.requestPointerLock():this.canvas.mozRequestPointerLock?this.canvas.mozRequestPointerLock():this.canvas.webkitRequestPointerLock&&this.canvas.webkitRequestPointerLock():document.exitPointerLock?document.exitPointerLock():document.mozExitPointerLock?document.mozExitPointerLock():document.webkitExitPointerLock&&document.webkitExitPointerLock())};Mouse.prototype.buttonPressed=function(a){return this.keys[a].isPressed};
Mouse.prototype.buttonJustPressed=function(a){return this.keys[a].justPressed};Mouse.prototype.buttonJustReleased=function(a){return this.keys[a].justReleased};Mouse.prototype.updatePosition=function(a,b,c,e){this._position.set(a,b);this._delta.x+=c;this._delta.y+=e;this._position_updated=!0};Mouse.prototype.updateKey=function(a,b){-1<a&&this._keys[a].update(b)};
Mouse.prototype.update=function(){for(var a=0;a<this._keys.length;a++)this._keys[a].justPressed&&this.keys[a].justPressed&&(this._keys[a].justPressed=!1),this._keys[a].justReleased&&this.keys[a].justReleased&&(this._keys[a].justReleased=!1),this.keys[a].set(this._keys[a].justPressed,this._keys[a].isPressed,this._keys[a].justReleased);this._wheel_updated?(this.wheel=this._wheel,this._wheel_updated=!1):this.wheel=0;this._position_updated?(this.delta.x=this._delta.x,this.delta.y=this._delta.y,this._delta.set(0,
0),this.position.x=this._position.x,this.position.y=this._position.y,this._position_updated=!1):(this.delta.x=0,this.delta.y=0)};function Keyboard(){this.keys=[];this.actions=[];for(var a=0;256>a;a++)this.keys.push(new Key);var b=this;document.onkeydown=function(a){b.actions.push(a.keyCode);b.actions.push(Key.KEY_DOWN)};document.onkeyup=function(a){b.actions.push(a.keyCode);b.actions.push(Key.KEY_UP)}}
Keyboard.prototype.update=function(){for(var a=0;this.actions.length>a;){var b=this.actions.shift(),c=this.actions.shift();this.keys[b].update(c);if(this.keys[b].justReleased||this.keys[b].justPressed)this.actions.push(b),this.actions.push(Key.KEY_RESET),a+=2}};Keyboard.prototype.reset=function(){this.actions=[];for(var a=0;a<this.keys.length;a++)this.keys[a].reset()};Keyboard.prototype.keyPressed=function(a){return this.keys[a].isPressed};Keyboard.prototype.keyJustPressed=function(a){return this.keys[a].justPressed};
Keyboard.prototype.keyJustReleased=function(a){return this.keys[a].justReleased};Keyboard.BACKSPACE=8;Keyboard.TAB=9;Keyboard.ENTER=13;Keyboard.SHIFT=16;Keyboard.CTRL=17;Keyboard.ALT=18;Keyboard.CAPS_LOCK=20;Keyboard.ESC=27;Keyboard.SPACEBAR=32;Keyboard.PAGE_UP=33;Keyboard.PAGE_DOWN=34;Keyboard.END=35;Keyboard.HOME=36;Keyboard.INSERT=45;Keyboard.DEL=46;Keyboard.LEFT=37;Keyboard.RIGHT=39;Keyboard.UP=38;Keyboard.DOWN=40;Keyboard.NUM0=48;Keyboard.NUM1=49;Keyboard.NUM2=50;Keyboard.NUM3=51;
Keyboard.NUM4=52;Keyboard.NUM5=53;Keyboard.NUM6=54;Keyboard.NUM7=55;Keyboard.NUM8=56;Keyboard.NUM9=57;Keyboard.A=65;Keyboard.B=66;Keyboard.C=67;Keyboard.D=68;Keyboard.E=69;Keyboard.F=70;Keyboard.G=71;Keyboard.H=72;Keyboard.I=73;Keyboard.J=74;Keyboard.K=75;Keyboard.L=76;Keyboard.M=77;Keyboard.N=78;Keyboard.O=79;Keyboard.P=80;Keyboard.Q=81;Keyboard.R=82;Keyboard.S=83;Keyboard.T=84;Keyboard.U=85;Keyboard.V=86;Keyboard.W=87;Keyboard.X=88;Keyboard.Y=89;Keyboard.Z=90;Keyboard.F1=112;Keyboard.F2=113;
Keyboard.F3=114;Keyboard.F4=115;Keyboard.F5=116;Keyboard.F6=117;Keyboard.F7=118;Keyboard.F8=119;Keyboard.F9=120;Keyboard.F10=121;Keyboard.F11=122;Keyboard.F12=123;